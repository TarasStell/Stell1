{% assign count = 0 %}


{% for block in section.blocks %}
    {% case block.type %}
        {% when 'announcement' %}


            <div class="custom-announcement-bar-{{count}}">

                <a class="custom-announcement-bar__link" href="{{ block.settings.link }}">
                    <p class="custom-announcement-bar__message-{{count}}">{{ block.settings.announcement_bar_text }}</p>
                </a>

            </div>


            {% style %}

.custom-announcement-bar-{{count}}{
    text-align: center;
}

.custom-announcement-bar__link {
    text-decoration: none;
}

.custom-announcement-bar__message-{{count}}{
    margin: 0;

    {% if block.settings.bold-text %}
        font-weight: bold;
    {% endif %}
    text-transform: {{block.settings.text-transform}};

    font-size: {{block.settings.font-size}}px;
    padding: {{block.settings.height}}px 0;
    background-color: {{block.settings.bg-color}};
    color: {{block.settings.font-color}}};

{% endstyle %}


            {% assign count = count | plus:1 %}

    {% endcase %}
{% endfor %}

{% schema %}

{
    "name": "Custom Announcement Bar",
    "max_blocks": 6,
    "blocks": [
        {
            "type": "announcement",
            "name": "Announcement",
            "settings": [
                {
                    "type": "text",
                    "id": "announcement_bar_text",
                    "default": "Default announcement",
                    "label": "Announcement Text"
                }, {
                    "type": "select",
                    "id": "text-transform",
                    "label": "Text Transform",
                    "options": [
                        {
                            "value": "normal",
                            "label": "Normal"
                        }, {
                            "value": "lowercase",
                            "label": "Lowercase"
                        }, {
                            "value": "uppercase",
                            "label": "Uppercase"
                        }, {
                            "value": "capitalize",
                            "label": "CapitaLize"
                        }
                    ],
                    "default": "normal"
                }, {
                    "type": "checkbox",
                    "id": "bold-text",
                    "label": "Bold Text",
                    "default": false
                }, {
                    "type": "range",
                    "id": "font-size",
                    "label": "Font Size",
                    "default": 14,
                    "min": 10,
                    "max": 22,
                    "step": 1,
                    "unit": "px"
                }, {
                    "type": "color",
                    "id": "font-color",
                    "label": "Font Color",
                    "default": "#eeeeee"
                }, {
                    "type": "range",
                    "id": "height",
                    "label": "Height",
                    "default": 6,
                    "min": 0,
                    "max": 30,
                    "step": 1,
                    "unit": "px"
                }, {
                    "type": "color",
                    "id": "bg-color",
                    "label": "background Color",
                    "default": "#ffffff"
                }, {
                    "type": "url",
                    "id": "link",
                    "label": "link"
                }
            ]
        }
    ]
}

{% endschema %}
